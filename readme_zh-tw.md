## English version description
- https://github.com/JW-Albert/IOT_Shadow_Display_UnixFinal/blob/frontend/readme.md

# ä¸­æ§å®¤å‰ç«¯æ§åˆ¶ä»‹é¢èªªæ˜ (Frontend README)

æœ¬å‰ç«¯ç¶²é ç‚º IOT_Shadow_Display_UnixFinal ç³»çµ±ä¸­çš„ä¸­æ§å®¤æ§åˆ¶ä»‹é¢ï¼Œä½¿ç”¨ç´” HTML + JavaScript å»ºæ§‹ï¼Œé€éå‘¼å« Flask API ä¾†é”æˆå°è¨­å‚™çš„ç›£æ§èˆ‡æ§åˆ¶ï¼Œä¸¦åŒ…å«ä½¿ç”¨è€…èªè­‰åŠŸèƒ½ã€‚

---

## âœ… åŠŸèƒ½èªªæ˜

1. **ä½¿ç”¨è€…èªè­‰ç³»çµ±**
   - ä½¿ç”¨è€…åç¨±/å¯†ç¢¼ç™»å…¥ç³»çµ±
   - è§’è‰²æ¬Šé™æ§åˆ¶ï¼ˆç®¡ç†å“¡èˆ‡ä¸€èˆ¬ä½¿ç”¨è€…ï¼‰
   - ä½¿ç”¨ Cookie é€²è¡Œæœƒè©±ç®¡ç†
   - æœªèªè­‰æ™‚è‡ªå‹•é‡å®šå‘è‡³ç™»å…¥é é¢

2. **é¡¯ç¤ºè¨­å‚™ç‹€æ…‹**
   - å¾ `/shadow/get?type=reported` å–å¾—è¨­å‚™ç›®å‰ç‹€æ…‹
   - æ ¹æ“šæ™‚é–“åŒæ­¥é¡¯ç¤ºè¨­å‚™ã€Œä¸Šç·šã€æˆ–ã€Œé›¢ç·šã€ç‹€æ…‹
   - ç•¶è¨­å‚™å›å ±æ™‚é–“èˆ‡ä¼ºæœå™¨æ™‚é–“å·®è·è¶…é 10 ç§’æ™‚ï¼Œåˆ¤å®šè¨­å‚™é›¢ç·š
   - æ¯ 10 ç§’è‡ªå‹•æ›´æ–°ç‹€æ…‹
   - æä¾›è¦–è¦ºåŒ–ç‹€æ…‹æŒ‡ç¤º

3. **é ç«¯æ§åˆ¶è¨­å‚™é–‹é—œ**
   - ä½¿ç”¨åˆ‡æ›é–‹é—œæ§åˆ¶è¨­å‚™é›»æºç‹€æ…‹
   - å‘¼å« `/shadow/update` è¨­å®š `desired.status`
   - ç‹€æ…‹è½‰æ›æ™‚æä¾›è¦–è¦ºå›é¥‹
   - è¨­å‚™é›¢ç·šæˆ–é–å®šæ™‚ç¦ç”¨æ§åˆ¶

4. **è¨­å®šåœ°ç«¯æ§åˆ¶æ¬Šé™**
   - ä½¿ç”¨åˆ‡æ›é–‹é—œæ§åˆ¶ `desired.permission`
   - `permission = 1`ï¼šå…è¨±åœ°ç«¯æ“ä½œ
   - `permission = 0`ï¼šç¦æ­¢åœ°ç«¯æ“ä½œ
   - åƒ…ç®¡ç†å“¡å¯ä¿®æ”¹æ¬Šé™è¨­å®š
   - è¨­å‚™é–å®šæ™‚ï¼ˆ`localper = 1`ï¼‰ç¦ç”¨æ¬Šé™æ§åˆ¶

---

## ğŸ› ï¸ ä½¿ç”¨æ–¹å¼

1. **Apache ä¼ºæœå™¨è¨­å®š**
   - å•Ÿç”¨å¿…è¦çš„ Apache æ¨¡çµ„ï¼š
     ```bash
     sudo a2enmod proxy
     sudo a2enmod proxy_http
     ```
   - è¨­å®š SSL è™›æ“¬ä¸»æ©Ÿ (www-le-ssl.conf)ï¼š
     ```apache
     ProxyPreserveHost On
     ProxyPass "/api/" "http://127.0.0.1:5000/"
     ProxyPassReverse "/api/" "http://127.0.0.1:5000/"
     ProxyPass "/authapi/" "http://127.0.0.1:6000/"
     ProxyPassReverse "/authapi/" "http://127.0.0.1:6000/"
     ```

2. éƒ¨ç½²æª”æ¡ˆï¼š
   - å°‡ `index.html` å’Œ `login.html` æ”¾ç½®æ–¼ç¶²é ä¼ºæœå™¨ç›®éŒ„
   - ç¢ºä¿ `LED.jpg` è¨­å‚™åœ–ç‰‡å¯ç”¨
   - åœ¨ JavaScript ç¨‹å¼ç¢¼ä¸­è¨­å®š API ç«¯é»ï¼š
     ```js
     const apiBase = "https://your-domain.com/api/shadow";
     const authapiBase = "https://your-domain.com/authapi";
     ```

3. å­˜å–ä»‹é¢ï¼š
   - åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿç¶²é ä»‹é¢
   - ä½¿ç”¨æœ‰æ•ˆæ†‘è­‰ç™»å…¥
   - æ§åˆ¶é¢æ¿å°‡è‡ªå‹•è¼‰å…¥ä¸¦é–‹å§‹ç›£æ§

---

## ğŸ”§ æ‰€éœ€ API ä»‹é¢

| æ–¹æ³• | è·¯å¾‘                        | èªªæ˜                                      |
| ---- | --------------------------- | ----------------------------------------- |
| GET  | `/shadow/get?type=reported` | å–å¾—ç›®å‰è¨­å‚™ç‹€æ…‹                          |
| GET  | `/shadow/get?type=desired`  | å–å¾—ç›®å‰è¨­å®šçš„æ¬Šé™ç‹€æ…‹                    |
| POST | `/shadow/update`            | å‚³é€ desired.status æˆ– desired.permission |
| POST | `/authapi/login`            | ä½¿ç”¨è€…èªè­‰                                |
| GET  | `/authapi/whoami`           | å–å¾—ç›®å‰ä½¿ç”¨è€…è³‡è¨Š                        |
| GET  | `/authapi/servertime`       | å–å¾—ä¼ºæœå™¨æ™‚é–“é€²è¡ŒåŒæ­¥                    |

---

## ğŸ§ª ç¯„ä¾‹äº’å‹•æµç¨‹

1. ä½¿ç”¨è€…èªè­‰ï¼š
   ```json
   POST /authapi/login
   {
     "username": "user",
     "password": "pass"
   }
   ```

2. è¨­å‚™æ§åˆ¶ï¼š
   ```json
   POST /shadow/update
   {
     "type": "desired",
     "data": { "status": 1 }
   }
   ```

3. æ¬Šé™æ›´æ–°ï¼š
   ```json
   POST /shadow/update
   {
     "type": "desired",
     "data": { "permission": 1 }
   }
   ```

---

## ğŸ“ æª”æ¡ˆèªªæ˜

- `index.html`ï¼šä¸»æ§åˆ¶é¢æ¿ä»‹é¢
- `login.html`ï¼šä½¿ç”¨è€…èªè­‰é é¢
- `LED.jpg`ï¼šè¨­å‚™åœ–ç‰‡
- ç´” HTML + CSS + JavaScriptï¼ˆç„¡å¤–éƒ¨å‡½å¼åº«ï¼‰

---

## ğŸ“œ æˆæ¬Š

æœ¬å‰ç«¯ä»‹é¢ç‚ºæ•™è‚²å°ˆæ¡ˆç”¨é€”ï¼Œå…è¨±è‡ªç”±ä¿®æ”¹èˆ‡æ‡‰ç”¨ã€‚
